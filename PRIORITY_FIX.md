# Исправление приоритетов колонок

## Проблема

При уменьшении окна первой исчезала колонка **Notes** (с важными описаниями задач), а **Context** (часто показывает "-") оставалась.

### Старые приоритеты скрытия:

```
180px → Все колонки
  ↓
140px → Скрыть Notes (❌ ПЛОХО - важная информация!)
  ↓
110px → Скрыть Context
  ↓
90px → Скрыть Subtasks
  ↓
70px → Только Stat + Title + Progress
```

## Решение

Изменён порядок приоритетов — **Notes** сохраняется дольше.

### Новые приоритеты скрытия:

```
180px → Все колонки: Stat | Title | Prog | Subt | Context | Notes
  ↓
150px → Скрыть Context первым (часто "-")
      → Остаются: Stat | Title | Prog | Subt | Notes ✓
  ↓
120px → Скрыть Subtasks
      → Остаются: Stat | Title | Prog | Notes ✓
  ↓
90px → Скрыть Notes
      → Остаются: Stat | Title | Prog
  ↓
70px → Компактный режим
      → Остаются: Stat | Title | Prog
  ↓
<70px → Минимум
      → Остаются: Stat | Title
```

## Визуальное сравнение

### Экран 140px

**Было:**
```
+----+------------------------+-----+------+----------+
|Stat|Title                   |Prog |Subt  |Context   |
+----+------------------------+-----+------+----------+
| OK |Scrollback & search     |100% |5/5   |-         |
|WARN|Text shaping            | 40% |2/5   |-         |
+----+------------------------+-----+------+----------+
       ❌ Notes исчезла!
```

**Стало:**
```
+----+------------------------+-----+------+-----------------------------------+
|Stat|Title                   |Prog |Subt  |Notes                              |
+----+------------------------+-----+------+-----------------------------------+
| OK |Scrollback & search     |100% |5/5   |Реализация системы прокрутки...    |
|WARN|Text shaping            | 40% |2/5   |Продвинутый рендеринг текста...    |
+----+------------------------+-----+------+-----------------------------------+
       ✓ Notes сохранена! Context скрыт (был "-")
```

### Экран 120px

**Было:**
```
+----+------------------------+-----+------+
|Stat|Title                   |Prog |Subt  |
+----+------------------------+-----+------+
       ❌ Notes и Context исчезли
```

**Стало:**
```
+----+------------------------+-----+-----------------------------------+
|Stat|Title                   |Prog |Notes                              |
+----+------------------------+-----+-----------------------------------+
| OK |Scrollback & search     |100% |Реализация системы прокрутки...    |
|WARN|Text shaping            | 40% |Продвинутый рендеринг текста...    |
+----+------------------------+-----+-----------------------------------+
       ✓ Notes сохранена даже на среднем экране!
       Context и Subtasks скрыты
```

## Технические изменения

### tasks.py (строки 774-781)

```python
# Было:
LAYOUTS = [
    ColumnLayout(min_width=180, columns=['stat', 'title', 'progress', 'subtasks', 'context', 'notes']),
    ColumnLayout(min_width=140, columns=['stat', 'title', 'progress', 'subtasks', 'context']),  # ❌ Notes исчезла
    ColumnLayout(min_width=110, columns=['stat', 'title', 'progress', 'subtasks']),
    ...
]

# Стало:
LAYOUTS = [
    ColumnLayout(min_width=180, columns=['stat', 'title', 'progress', 'subtasks', 'context', 'notes']),
    ColumnLayout(min_width=150, columns=['stat', 'title', 'progress', 'subtasks', 'notes']),  # ✓ Context скрыт первым
    ColumnLayout(min_width=120, columns=['stat', 'title', 'progress', 'notes']),              # ✓ Notes сохранена!
    ColumnLayout(min_width=90, columns=['stat', 'title', 'progress']),
    ...
]
```

## Обоснование приоритетов

### 1. Context (скрывается первым)
- **Частота использования:** Низкая
- **Полезность:** Обычно пустое ("-") или дублирует информацию
- **Альтернатива:** Видно в detail view

### 2. Subtasks (скрывается вторым)
- **Частота использования:** Средняя
- **Полезность:** Счётчик подзадач полезен, но не критичен
- **Альтернатива:** Прогресс показан в колонке Progress

### 3. Notes (сохраняется долго!)
- **Частота использования:** Высокая
- **Полезность:** Содержит описание задачи — критически важно для понимания
- **Альтернатива:** Нет быстрой альтернативы (detail view требует дополнительного клика)

### 4. Progress (всегда виден)
- **Частота использования:** Очень высокая
- **Полезность:** Ключевая метрика состояния задачи

### 5. Title (всегда виден)
- **Частота использования:** Обязательная
- **Полезность:** Основной идентификатор задачи

### 6. Stat (всегда виден)
- **Частота использования:** Обязательная
- **Полезность:** Визуальный индикатор статуса (OK/WARN/FAIL)

## Результаты

### Тесты

```bash
$ python3 test_responsive.py
✓ Layout Selection               | ✓ PASSED
✓ Width Calculation              | ✓ PASSED
✓ Detail View Width              | ✓ PASSED
```

### Метрики

| Метрика | Значение |
|---------|----------|
| Новых breakpoints | 2 (150px, 120px) |
| Изменённых строк кода | 4 |
| Breakpoint Context→скрыт | 150px (было 180px) |
| Breakpoint Notes→видна до | 120px (было 180px!) |
| Выигрыш для Notes | +60px видимости |

## Проверка

Теперь при уменьшении окна:

1. **180px+** → Все колонки
2. **150-179px** → Context исчезает (первым!)
3. **120-149px** → Subtasks исчезает, **Notes остаётся** ✓
4. **90-119px** → Notes исчезает
5. **70-89px** → Компактный режим
6. **<70px** → Минимум

---

**Дата:** 2025-01-17
**Тикет:** UI Priority Fix
**Версия:** 2.9.1
